# [あなたのゲームタイトル]

| | |
| :--- | :--- |
| **開発エンジン** | Unreal Engine 5.3.2 |
| **開発期間** | 約 [X] 週間 (2025年 6月 1日 ～ 8月 2日)現在 |
| **開発規模** | [ほぼ個人開発、チーム開発の経験も積みたいと思い、現在は一人アニメーションエンジニアの友人と開発を進めています]|
| **担当範囲** | [例: 全てのプログラム、ゲームデザイン、シナリオ] |
| **ソースコード** | [GitHubリポジトリへのリンク (このリポジトリです)] |
| **(あれば)動画** | [YouTubeなどにアップしたプレイ動画へのリンク] |

---
## 概要 (Overview)
Unreal Engine 5を用いて、[開発期間]で制作した3Dアドベンチャーゲームです。「ぼくのなつやすみ」にインスパイアされた、夏休みの最後の3日間を追体験する物語を描きます。

プレイヤーは、時間の流れを感じながら小さな田舎町を探索し、NPCとの交流を通じて「忘れられた約束」の謎を解き明かしていきます。

**(ここにゲームの最も魅力的なスクリーンショットを1枚挿入)**

---
### 技術的なハイライト (Technical Highlights)

このプロジェクトのコアシステムは、全て**ブループリント**を用いて設計・実装しました。これにより、迅速なイテレーションと、複雑なゲームロジックの視覚的な管理を実現しています。習熟も兼ねて今後、実装完了している一部の機能及び新機能をC++で修正、実装予定。

### 1. 動的な時間経過とイベント管理システム (Blueprint)

- **GameStateによる中央集権的な時間管理:**
  - `GameState`ブループリント内に、`Event Tick`で実行される時間経過（日・時・分）のコアロジックを実装。ゲーム全体の時間を一元管理し、安定した動作を確保しました。

- **時間帯に応じた動的な環境変化:**
  - ゲーム内の時間経過と完全に同期し、レベルの環境光がリアルタイムかつ滑らかに変化します。
  - **1日の進行度を0.0～1.0の割合(`DayProgress`)として計算**し、その値を基に**太陽の回転角度 (`Directional Light` のPitch)を連続的に更新。**これにより、太陽が空を移動する軌道を自然に表現しています。
  - さらに、この太陽の角度情報を基に `BP_Sky_Sphere` の **`Update Sun Direction`** 関数を毎フレーム呼び出すことで、空の色合いが朝焼けから日中、夕焼け、そして夜空へと**継ぎ目なく滑らかに**移り変わる、没入感の高い環境を実現しました。
  - **レベルアクタとの疎結合な連携:** `GameState`から直接レベルのアクタ（太陽光や空）を参照するのではなく、専用の管理アクタ（`BP_LevelLightingManager`）を介して参照を受け渡す設計を採用。これにより、`GameState`はレベル固有の情報から独立し、再利用性と保守性を高めています。

- **イベントディスパッチャ / 関数による連携:**
  - `GameState`が持つ「時間帯の変更」や「日付の変更」といったイベントを、ブループリントの各アクター（NPC、環境オブジェクト等）が受け取り、自律的に状態を変化させる疎結合な設計を構築しました。
- **今後の展望 (C++化):**
  - 現在ブループリントで実装されているこの時間管理システムは、パフォーマンスと保守性をさらに向上させるため、将来的にC++でリファクタリングする計画です。`UPROPERTY(BlueprintReadOnly)`を用いて主要な変数をブループリントに公開し、コアロジックをC++に移行することで、より堅牢なシステムを目指します。

### 2. **データ駆動型の高度な会話・フラグシステム (Blueprint)**
- **構造体(Struct)の活用:**
  - `S_DialogueEntry`構造体を定義し、会話のセリフ、発生条件（日付、時間帯、必須フラグ）、達成フラグをデータとして一元管理。これにより、プログラマー以外でも容易にイベントの追加・変更が可能なワークフローを実現しました。
- **優先度付き会話選択ロジック:**
  - NPCとのインタラクト時に、`For Each Loop`と複数の`Branch`、ローカル変数を駆使し、「前提条件を満たす特別な会話」を「通常会話」よりも優先して表示するロジックを実装。これにより、物語の進行度に応じた自然な会話の分岐を実現しました。

### 3. **物語主導の時間停止システム (Blueprint)**
- **複合的な条件判定:**
  - 「会話中」という短期的な状態と、「その時間帯に未達成の必須イベントが存在するか」という長期的な状態を`GameState`で一元管理。
  - `OR`と`NOT`を組み合わせた条件分岐により、プレイヤーが重要な物語を見逃すことなく、自分のペースでゲームを進められるプレイ体験を提供します。

### 4. **Git / Git LFSによるバージョン管理**
- **チーム開発環境の構築:** GitHub上にプライベートリポジトリを設置し、`.gitignore` (Unreal Engine用) と `.gitattributes` (Git LFS用) を適切に設定。
- **コンフリクト解決とファイルロック:** バイナリファイル（`.umap`, `.uasset`）で発生したマージコンフリクトを、`git checkout --theirs/--ours` を用いて解決。再発防止策として、主要アセットを編集する際のファイルロック（`git lfs lock`）のチームルールを導入・実践しました。

---
## ゲームの特徴 (Features)

- **時間と共に表情を変える世界:** 朝・昼・夕方・夜で太陽の角度や光、空の色が滑らかに変化します。
- **生きている町:** NPCは決まった時間、決まった場所にだけ姿を現し、世界の生活感を演出します。
- **分岐する物語:** プレイヤーの行動（誰と話し、何を発見したか）によって、3日目の朝の会話が変化し、結末が「パーフェクトエンディング」と「通常エンディング」に分岐します。
- **クライマックスの演出:** 物語の進行度に応じて、特別なオブジェクトやNPCが特定の時間に出現し、物語の最終盤を盛り上げます。

---
## 使用アセット・ツール (Assets & Tools)

### 開発環境
- **エンジン:** Unreal Engine 5.3.2
- **IDE:** Visual Studio 2022
- **バージョン管理:** Git / Git LFS (Source Control: GitHub)

### 3Dアセット
- **背景:** [Japan Countryside](https://www.unrealengine.com/marketplace/ja/product/japan-countryside) - (アセットストアへのリンク)
  - *Unreal Engine Fab(Marketplace)で購入したアセットです。日本の田舎町の美しい景観を構築するために使用しました。*
- **キャラクター:** [UE5 Mannequin (Manny & Quinn)](https://docs.unrealengine.com/5.0/ja/real-time-character-rigging-with-control-rig-in-unreal-engine/) - (公式ドキュメントへのリンク)
  - *Unreal Engine 5にデフォルトで含まれているキャラクターモデルとスケルトンをベースとして使用しました。*


### サウンド
- **BGM:**
  - [DOVA-SYNDROME](https://dova-s.jp/bgm/play18917.html)
  - *作曲者: [蒲鉾さちこ] 様 - 曲名: [初夏の風を感じて…]*
  - 
  - [Springin] (https://www.springin.org/sound-stock/subcategory/cicada/)
  - *作曲者: 不明 - 曲名: [ミンミンゼミヒグラシループ]*

- **効果音:** [効果音ラボ](https://soundeffect-lab.info/)
  - *[例: 歩行音、UI決定音などに使用]*

### タイトル画像
　- [ゲームまてりあるず](https://game-materials.com/seaside-residential-area/)
　- *制作者: [くらげさん] 様 - 画像名: [海沿いの住宅街]*

### フォント
- **[フォント名]**: [モギハ・ペン字]
  - **制作者:** [花の星] 様
  - **配布元URL:**(https://ahito.com/item/desktop/font/mogihaPen/)
